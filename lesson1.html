<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Trial LMS — Lesson 1</title><link rel="stylesheet" href="css/style.css"></head>
<body data-page="lesson1">
  <div class="container">
    <header class="topbar"></header>
    <div class="layout">
      <aside class="sidebar"></aside>
      <main>
        <div class="card">
          <h1>Lesson 1 — Architecture Basics</h1>
          <p class="lead">Architecture integrates form, function and context. Designers balance usability, safety and aesthetics.</p>
          <p>Materials like timber, steel and concrete have distinct properties that affect design choices.</p>
          <p>Site analysis (orientation, wind, topography) informs passive design strategies for comfort and energy efficiency.</p>
        </div>



        <div class="card" style="margin-top:12px">
          <h2>Quiz 1 (4 questions · 40%)</h2>
          <div id="quiz1-block">
            <!-- sample question structure (JS will create) -->
          </div>
          <div class="row" style="margin-top:12px">
            <button class="submitAttempt" class="btn">Submit Attempt</button>
            <div style="margin-left:auto"><strong>Attempts:</strong> <span class="attemptBadge">0/3</span></div>
          </div>

          <div class="row" style="margin-top:12px">
            <div><strong>Live potential:</strong> <span class="livePotential">0%</span></div>
            <div style="margin-left:12px"><strong>Quiz score:</strong> <span class="quizScore">0%</span></div>
            <div style="margin-left:auto"><strong>Overall:</strong> <span class="globalScore">0%</span></div>
          </div>

          <div style="margin-top:12px" class="progress-row">
            <div class="linear" role="progressbar" aria-valuemin="0" aria-valuemax="100"><div class="bar"></div></div>
            <div class="circular"><svg width="92" height="92" viewBox="0 0 100 100"><circle cx="50" cy="50" r="42" stroke="rgba(255,255,255,0.06)" stroke-width="10" fill="none"></circle><circle class="progress-fill" cx="50" cy="50" r="42" stroke="url(#g2)" stroke-width="10" stroke-linecap="round" fill="none"></circle></svg><div class="value">0%</div></div>
          </div>
          <div class="stepper" style="margin-top:12px"></div>
          <div class="animated" style="margin-top:12px"><div class="runner"></div></div>
        </div>

        <div class="card forum" style="margin-top:12px">
          <h3>Discussion Forum</h3>
          <div id="quiz1-forum-messages" class="messages"></div>
          <textarea id="quiz1-forum-input" placeholder="Write a message..."></textarea>
          <div style="margin-top:8px"><button id="quiz1-forum-post" class="btn">Post</button></div>
        </div>

      </main>
    </div>
  </div>

<script src="js/auth.js"></script>
<script src="js/lms.js"></script>
<script src="js/quiz.js"></script>
<script src="js/forum.js"></script>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  // ensure auth UI
  AUTH.renderChrome('lesson1');

  // create quiz content programmatically so structure is consistent
  const quiz1HTML = `
    <div class="question" data-name="q1" data-type="radio" data-answer="b">
      <div class="q-title">1) Architecture balances:</div>
      <div class="options">
        <label class="option"><input type="radio" name="q1" value="a"> Cost only</label>
        <label class="option"><input type="radio" name="q1" value="b"> Usability, safety, and aesthetics</label>
        <label class="option"><input type="radio" name="q1" value="c"> Ornament over function</label>
      </div>
      <div class="feedback"></div>
    </div>

    <div class="question" data-name="q2" data-type="radio" data-answer="c">
      <div class="q-title">2) Material selection key factor:</div>
      <div class="options">
        <label class="option"><input type="radio" name="q2" value="a"> Popularity</label>
        <label class="option"><input type="radio" name="q2" value="b"> Only color</label>
        <label class="option"><input type="radio" name="q2" value="c"> Span, load, durability, carbon impact</label>
      </div>
      <div class="feedback"></div>
    </div>

    <div class="question" data-name="q3" data-type="radio" data-answer="a">
      <div class="q-title">3) Passive strategy example:</div>
      <div class="options">
        <label class="option"><input type="radio" name="q3" value="a"> External shading and insulation</label>
        <label class="option"><input type="radio" name="q3" value="b"> Oversized mechanical systems</label>
        <label class="option"><input type="radio" name="q3" value="c"> Extra decorative lighting</label>
      </div>
      <div class="feedback"></div>
    </div>

    <div class="question" data-name="q4" data-type="multi" data-answer="orientation|topography">
      <div class="q-title">4) Select all that inform site analysis:</div>
      <div class="options">
        <label class="option"><input type="checkbox" name="q4" value="orientation"> Sun orientation</label>
        <label class="option"><input type="checkbox" name="q4" value="brand"> Brand identity</label>
        <label class="option"><input type="checkbox" name="q4" value="topography"> Topography</label>
      </div>
      <div class="feedback"></div>
    </div>
  `;
  document.getElementById('quiz1-block').innerHTML = quiz1HTML;

  // initialize Quiz engine for this container
  const container = document.getElementById('quiz1-block');
  Quiz.initQuizPage(container, 'quiz1');

  // wire forum
  document.getElementById('quiz1-forum-post').addEventListener('click', ()=>{ FORUM.post('quiz1', document.getElementById('quiz1-forum-input').value); document.getElementById('quiz1-forum-input').value=''; });
  FORUM.render('quiz1');
});
</script>
</body>
</html>
